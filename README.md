# Ordering System (Backend)

---

## ç›®éŒ„

1. [ä½œå“ä»‹ç´¹](#ä½œå“ä»‹ç´¹) - é¤å»³é»é¤ç³»çµ±ä»‹ç´¹ã€‚
2. [è² è²¬é …ç›®](#è² è²¬é …ç›®) - è©³ç´°åˆ—å‡ºç³»çµ±é–‹ç™¼éç¨‹ä¸­è² è²¬çš„å·¥ä½œé …ç›®ã€‚
3. [æŠ€è¡“ä»‹ç´¹](#æŠ€è¡“ä»‹ç´¹) - åŒ…å«ç³»çµ±è¦åŠƒæ ¸å¿ƒã€æŠ€è¡“é¸æ“‡ã€å¾Œç«¯ç¨‹å¼æ¶æ§‹ã€è³‡æ–™åº«æ¶æ§‹ã€API åˆ—è¡¨ç­‰è³‡è¨Šã€‚
4. [æŠ€è¡“æ¸…å–®](#æŠ€è¡“æ¸…å–®) - åŒ…å«äº†ä½¿ç”¨çš„å¾Œç«¯æŠ€è¡“å’Œç›¸é—œå·¥å…·çš„æ¸…å–®ã€‚

## ä½œå“ä»‹ç´¹

### ç°¡ä»‹

æˆ‘èˆ‡å¦ä¸€åå‰ç«¯å·¥ç¨‹å¸«åˆä½œä¸¦è¨­è¨ˆä¸¦é–‹ç™¼çš„ä¸€æ¬¾é¤å»³é»é¤ç³»çµ±ï¼Œåˆ†ç‚º **å•†åº—ç®¡ç†ç³»çµ±ï¼ˆStore Ease å•†åº—è¼•é¬†ç†ï¼‰** èˆ‡ **å¿«é€Ÿé»é¤ç³»çµ±ï¼ˆOrder Ease é¤é»è¼•é¬†è¨‚ï¼‰** å…©éƒ¨ä»½ï¼›è€Œé€™å€‹ Project æ˜¯æ•´å€‹ç³»çµ±çš„å¾Œç«¯æ¶æ§‹ã€‚

- **å•†åº—è¼•é¬†ç†**

  - åŠŸèƒ½ç‰¹è‰²ï¼š
    - å¸³æˆ¶ç®¡ç†ï¼š ä»¥ E-Mail è¨»å†Šï¼Œä¸¦æ–¼å¾ŒçºŒæ›´æ”¹ä½¿ç”¨è€…è³‡è¨Šæˆ–åˆªé™¤ç”¨æˆ¶
    - å•†åº—ç®¡ç†ï¼š è¼•é¬†ç®¡ç†å¤šå€‹å•†åº—è³‡è¨Šã€èœå–®å’Œåº§ä½é…ç½®ã€‚
    - è¨‚å–®ç®¡ç†ï¼š ç”Ÿæˆ QRCode æä¾›çµ¦å®¢æˆ¶ï¼Œè®“ä»–å€‘å¯ä»¥å¿«é€Ÿé»é¤ï¼Œä¸¦å¯¦æ™‚æ¥æ”¶è¨‚å–®ä¿¡æ¯ã€‚
    - å³æ™‚é€šè¨Šï¼š é€é FCMï¼Œåœ¨å®¢æˆ¶é»é¤æ™‚å³æ™‚æ¥æ”¶è¨‚å–®è³‡è¨Šï¼Œ
  - æœªä¾†å±•æœ›ï¼š
    æ•´åˆç†è²¡ç³»çµ±ï¼Œé€²è¡Œç‡Ÿæ¥­é¡çµ±è¨ˆèˆ‡è¦–è¦ºåŒ–å‘ˆç¾ã€‚

- **é¤é»è¼•é¬†è¨‚** ï¼ˆ :bell:å¯åƒè€ƒæˆ‘çš„å¦å¤–ä¸€å€‹ Repository -> [Order Ease App](https://github.com/phzeng0726/order-ease-app-demo)ï¼‰
  - åŠŸèƒ½ç‰¹è‰²ï¼š
    - å¸³æˆ¶ç®¡ç†ï¼š å¯ä»¥ E-Mail å¯¦åæˆ–åŒ¿åè¨»å†Šï¼Œä¸¦æ–¼å¾ŒçºŒæ›´æ”¹ä½¿ç”¨è€…è³‡è¨Šæˆ–åˆªé™¤ç”¨æˆ¶
    - å¿«é€Ÿé»é¤ï¼š æƒæå•†åº—ç”Ÿæˆçš„ QRCodeï¼Œå³æ™‚ç²å–å•†åº—èœå–®ä¸¦å¿«é€Ÿé»é¤ã€‚
    - è¨‚å–®å³æ™‚æ›´æ–°ï¼š é€é FCMï¼Œåœ¨å•†åº—æœ‰ä»»ä½•è¨‚å–®ç‹€æ…‹æ›´æ–°æ™‚åŠæ™‚å›é¥‹çµ¦å®¢æˆ¶ã€‚
    - è¨‚å–®ç´€éŒ„ï¼š ç´€éŒ„æ‰€æœ‰çš„è¨‚å–®æ­·å²
  - æœªä¾†å±•æœ›ï¼š æ•´åˆç†è²¡ç³»çµ±ï¼Œå¯¦ç¾é ç®—æ§ç®¡èˆ‡è¦–è¦ºåŒ–å‘ˆç¾ã€‚ä¹Ÿå¯å°‡è¨‚å–®æ­·å²çš„å•†å®¶åœ°ç†ä½ç½®åšæˆåœ°åœ–ï¼Œè®“é»é¤ä¹Ÿèƒ½ç´€éŒ„ç”¨æˆ¶çš„è¡Œå¾‘è»Œè·¡ï¼Œå¢æ·»è¶£å‘³æ€§ã€‚

### é–‹ç™¼æ™‚é•·

- åŒ…å«è¨­è¨ˆè¦åŠƒèˆ‡æºé€šï¼Œå¾ç„¡åˆ°å»ºç«‹ï¼Œé–‹ç™¼ç¸½æ™‚é•·**ç‚º 8 é€±**ã€‚

## è² è²¬é …ç›®

- Scrum å°ˆæ¡ˆç®¡ç†
- å…·å½ˆæ€§åŒ–çš„è³‡æ–™åº«èˆ‡ç³»çµ±æ¶æ§‹è¨­è¨ˆ
- Gmail SMTP è¨­ç½®
- èˆ‡å‰ç«¯å·¥ç¨‹å¸«æºé€šï¼Œè¨­è¨ˆä¸¦è£½ä½œæ‰€æœ‰ RESTful APIs
  - å¤šåœ‹èªè¨€è³‡æ–™ç®¡ç†åˆ‡æ›
  - åœ–ç‰‡ä¸Šå‚³
  - OTP å¯„é€ã€é©—è­‰
  - æ–°å¢/è®€å–/ç·¨è¼¯/åˆªé™¤ **ç”¨æˆ¶**è³‡è¨Šï¼ˆæ­é… Firebase Authï¼‰
  - æ–°å¢/è®€å–/ç·¨è¼¯/åˆªé™¤ **å•†åº—**ã€**èœå–®**ã€**é¡åˆ¥**ã€**åº§ä½**ã€**è¨‚å–®**è³‡è¨Š
  - ä¸²æ¥ FCMï¼Œå³æ™‚ç™¼é€èˆ‡å›å‚³**è¨‚å–®ç‹€æ…‹è³‡è¨Š**
- é›²ç«¯å°ˆæ¡ˆä½ˆç½²
  - Google Cloud Run
  - MySQL (Railway)

## æŠ€è¡“ä»‹ç´¹

### å°ˆæ¡ˆæ¦‚è¿°

é€™å€‹å°ˆæ¡ˆæ˜¯æˆ‘åœ¨æ¥­é¤˜æ™‚é–“é–‹ç™¼çš„ï¼Œé›–ç„¶æ˜¯å€‹äººä½œå“ï¼Œä½†å¸Œæœ›åœ¨æœªä¾†ä»ç„¶å¯ä»¥ç¹¼çºŒæ“´å±•ã€‚å› æ­¤ï¼Œåœ¨æ¶æ§‹è¨­è¨ˆä¸Šæ³¨é‡ç¶­è­·æ€§å’Œæœªä¾†æ“´å±•æ€§ã€‚

### ç³»çµ±è¦åŠƒæ ¸å¿ƒ

åœ¨è¦åŠƒéšæ®µï¼Œæˆ‘è€ƒæ…®äº†ä»¥ä¸‹å››å€‹ä¸»è¦æ ¸å¿ƒå› ç´ ï¼š

1. **å•†å®¶èˆ‡é¡§å®¢æ˜¯å¦è©²çµåˆæˆä¸€æ”¯å¤§å‹ APP**

   è‹¥å°‡å•†å®¶èˆ‡å®¢æˆ¶çµåˆæˆä¸€æ”¯å¤§å‹çš„ APPï¼Œå½¼æ­¤åŠŸèƒ½çš„æ¥­å‹™é‚è¼¯ç›¸ç•¶åˆ†æ•£ï¼Œæ•ˆèƒ½å’Œç¶­è­·æ€§æœƒå—åˆ°å½±éŸ¿ã€‚å› æ­¤ï¼Œå°‡å•†å®¶èˆ‡é¡§å®¢çš„ APP ç¨ç«‹æˆå…©å€‹ä¸åŒçš„ APPï¼Œä¸¦åœ¨ Database ä»¥ `user_type` å€åˆ†ç”¨æˆ¶é¡åˆ¥ã€‚

2. **ç”¨æˆ¶è¨»å†Šå®‰å…¨æ€§**

   ä¸€èˆ¬è‡ªå»ºçš„ç™»å…¥ç³»çµ±ï¼Œç‚ºäº†åœ¨å¯†ç¢¼å„²å­˜æ™‚åŠ ä¸Šå®‰å…¨ç­–ç•¥ï¼Œé€šå¸¸æœƒä»¥é›œæ¹ŠåŠ é¹½æ¼”ç®—æ³•ä¾†æå‡åŸºæœ¬çš„å®‰å…¨æ€§ã€‚ä¸éå› ç‚ºæ­¤å°ˆæ¡ˆåœ¨è¦åŠƒæ™‚å°±å·²ç¶“é æƒ³åˆ°å¾ŒçºŒä¸€å®šæœƒä½¿ç”¨åˆ° Firebase Cloud Messaging (FCM) é€™å€‹æœå‹™å¯¦è¸é€šçŸ¥æ¨æ’­ã€‚

   é¸æ“‡çµåˆç›®å‰ APP æœ€ä¸»æµçš„è¨»å†Šæ–¹å¼ â€” Firebase Authentication æœå‹™é€²è¡Œç”¨æˆ¶è¨»å†Šï¼Œåœ¨é€™å€‹æœå‹™ä¹‹ä¸‹ä¸éœ€è¦åœ¨è³‡æ–™åº«å„²å­˜ä»»ä½•å¯†ç¢¼è³‡è¨Šï¼Œä¹Ÿä¸éœ€è¦èŠ±è²»æ™‚é–“å‰µå»ºè¤‡é›œçš„ç™»å…¥ç³»çµ±ã€‚

3. **å•†å®¶ç®¡ç†æ˜“æ–¼æ“´å±•**

   > ç”¨æˆ¶å¯èƒ½ä¾†è‡ªä¸–ç•Œå„åœ°ï¼Œæ¯å€‹å•†å®¶ç”¨æˆ¶éƒ½å¯èƒ½æœ‰å¤šå€‹ä¸åŒçš„å•†åº—èˆ‡å¤šå€‹ä¸åŒçš„èœå–®

   è³‡æ–™åº«çš„é è¨­è³‡æ–™å„²å­˜æ¶æ§‹éœ€è¦æ”¯æ´å¤šèªç³»ï¼Œä¸¦éœ€å„²å­˜å•†åº—ç‡Ÿæ¥­çš„ Timezoneã€‚æ­¤å¤–ï¼Œå•†åº—èˆ‡èœå–®çš„é€£æ¥ç”±æ–¼æ˜¯å¤šå°å¤šçš„é—œä¿‚ï¼Œéœ€è¦å»ºç«‹ Mapping table ä½œç‚ºå½ˆæ€§é€£æ¥çš„æ©‹æ¨‘ã€‚

4. **å•†å®¶èˆ‡é¡§å®¢ä¹‹é–“çš„å³æ™‚è¯ç¹«**

   > å•†å®¶èˆ‡é¡§å®¢åœ¨å½¼æ­¤å»ºç«‹è¨‚å–®èˆ‡æ›´æ–°è¨‚å–®ç‹€æ…‹æ™‚è¦èƒ½åŠæ™‚æ¥å—å½¼æ­¤çš„å‹•æ…‹é€šçŸ¥

   æ¡ç”¨ Firebase Cloud Messaging (FCM) æœå‹™ï¼Œè®“å¾Œç«¯å­˜å–å‰ç«¯çš„ Device Token å¾Œèƒ½ä¸»å‹•é€šçŸ¥å‰ç«¯åˆ·æ–°é é¢ã€‚

### æŠ€è¡“é¸æ“‡

- **å‰ç«¯**ï¼šFlutterï¼Œè·¨å¹³å°ä¸”éˆæ´»çš„é¸æ“‡æ–¹æ¡ˆã€‚
- **å¾Œç«¯**ï¼šä½¿ç”¨ Golangï¼Œç¨‹å¼æ‰“åŒ…æˆ Docker Image å¾Œï¼Œç³»çµ±æ›´è¼•é‡åŒ–ã€‚è³‡æ–™åº«é¸ç”¨ MySQLã€‚
- **é›²ç«¯ä¼ºæœå™¨**ï¼šGoogle Cloud Run é€²è¡Œå®¹å™¨åŒ–ä½ˆç½²ï¼Œæœªä¾†ä¹Ÿä¾¿æ–¼é·ç§»ã€æ“´å±•ã€‚æ­é… Railway ä½ˆç½² MySQLï¼Œå…©è€…å‡æœ‰å…è²»é¡åº¦è¶³å¤ æ‡‰å°é–‹ç™¼éœ€æ±‚ã€‚

### å¾Œç«¯ç¨‹å¼æ¶æ§‹

å°ˆæ¡ˆè³‡æ–™å¤¾æ¶æ§‹é¸ç”¨å¾Œç«¯æœ€é€šç”¨çš„ä¸‰å±¤å¼æ¶æ§‹ï¼Œ**å°ˆæ¡ˆè·¯å¾‘** (ğŸ“ `app`)ã€‚ç¢ºä¿ç¨‹å¼çš„æ“´å……æ€§èˆ‡ç¶­è­·æ€§ã€‚

![Backend Folder Structure](screenshots/backend_folder_structure.png)

### è³‡æ–™åº«æ¶æ§‹

ç¶œåˆäº† [è¦åŠƒè€ƒé‡](#è¦åŠƒè€ƒé‡) å¾Œï¼Œæˆªè‡³ç›®å‰`v1.0.0`ç‚ºæ­¢ï¼Œè³‡æ–™åº«ä¸­å…±æœ‰ 20 å¼µè¡¨æ ¼ã€‚

![Ordering System v1.0 Database Structure](screenshots/ordering_system_database_structure.png)

- ç”¨æˆ¶: user, user_account
- å•†å®¶ç®¡ç†: stores, store_opening_hours, store_seats, store_menu_mapping, menus, menu_items, menu_item_mapping, categories, category_language, category_user_mapping
- è¨‚å–®: order_tickets, order_ticket_items
- å…¶ä»–: images, language, otp_mail, otp, fcm_token, fcm_messages

### API åˆ—è¡¨ (Swagger æ–‡ä»¶å¾…æ›´æ–°)

æˆªè‡³ç›®å‰`v1.0.0`ç‚ºæ­¢ï¼Œå…±æœ‰ 40 æ”¯ RESTful APIï¼Œæ¶æ§‹ç‚º`https://<Endpoint>/api/v1/<Path>`ã€‚

![Sample RESTful APIs](screenshots/postman.png)

## æŠ€è¡“æ¸…å–®

### Language

- **Golang** `v1.20` |

  - **Main Dependencies**

    - Gin-Gonic (`github.com/gin-gonic/gin` v1.9.1)
    - MySQL & GORM (`gorm.io/driver/mysql` v1.5.1, `gorm.io/datatypes` v1.2.0, `gorm.io/gorm` v1.25.4)

  - **All Dependencies**

    ![All dependencies in backend system](screenshots/dependencies.png)

### Cloud Services

- **Server**
  - Google Cloud Run
- **Database**
  - MySQL (Deploy on **Railway**)
- **Others**
  - Gmail SMTP (OTP mail sender)
  - Firebase Auth
  - Firebase Cloud Messaging (FCM)

### Other Tools

- **Git** (Version control)
- **Docker** (Container)
- **Postman** (API tool)
- **Trello** (Scrum pattern)
- **DrawSQL** (Database design tool)
